"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6191],{21266:(e,t,n)=>{n.d(t,{ClientIntlProvider:()=>v,X5:()=>y,YX:()=>p,fl:()=>m,secretMessage:()=>_});var a=n(54568),i=n(77001),r=n(73356),l=n(45312),o=n(7620),u=n(20420),s=n(59666),d=n(65816);let c=new Set,g=e=>{if(e.message.includes("MISSING_TRANSLATION")){if(c.has(e.message))return;c.add(e.message)}r.v.error(r.u.I18N,"Intl error",e)},f=()=>void 0;function v(e){let{locale:t,messages:n,children:r,hideErrors:s}=e;return(0,o.useEffect)(()=>{l.wB.defaultLocale=t},[t]),(0,a.jsx)(u.A,{locale:t,messages:n,onError:s?f:(0,i.O0)()?g:void 0,fallbackOnEmptyString:!1,children:(0,a.jsx)(a.Fragment,{children:r})})}function p(e){let{id:t,dangerouslyVisiblePublicValues:n}=e;return(0,a.jsx)(s.A,{id:(0,d.ey)(t),defaultMessage:" ",values:n})}function y(e){let{id:t}=e;return(0,a.jsx)(s.A,{id:(0,d.lK)(t),defaultMessage:" "})}function m(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,d.lK)(t),defaultMessage:" "})}function _(e){let{id:t,intl:n,dangerouslyVisiblePublicValues:a}=e;return n.formatMessage({id:(0,d.ey)(t),defaultMessage:" "},a)}},22624:(e,t,n)=>{n.d(t,{K:()=>o,p:()=>u});var a=n(64328),i=n(60687),r=n(95617),l=n(66365);let o=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:o,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:s}=(0,i.t)(),d=(0,l.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,c=s&&u&&o?o===r.d7.PRO||o===r.d7.MAX||o===r.d7.ENTERPRISE:e||t||n,g=(0,l.useLayer)("trials_freemium").get("free_project",!1);return d||c||g},u=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:o,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:s}=(0,i.t)(),d=(0,l.useDynamicConfig)("claude_ai_projects_limits"),c=(0,l.useLayer)("trials_freemium");if(s&&u&&o?o===r.d7.PRO||o===r.d7.MAX||o===r.d7.ENTERPRISE:e||t||n)return;let g=d.get("max_free_projects",0);return g>0?g:+!!c.get("free_project",!1)}},34003:(e,t,n)=>{n.d(t,{EG:()=>S,FX:()=>p,Gh:()=>g,JO:()=>k,UA:()=>_,Vx:()=>Y,Vy:()=>v,Yl:()=>b,d6:()=>w,p0:()=>y,t5:()=>f,u9:()=>L,up:()=>j,ut:()=>m});var a=n(94295),i=n(1613),r=n(64328),l=n(35984),o=n(80688),u=n(68067),s=n(7620),d=n(10369),c=n(24407);function g(){return(0,u.fS)("trials_and_tribulations_of_high_school_football")}function f(){var e,t;let n=(0,r.mV)(),a=(0,r.zm)(),{activeOrganization:l}=(0,r.YL)(),s=(0,u.fS)("default_wiggle_on"),{data:d}=(0,i.Sk)("/api/organizations/".concat(null==l?void 0:l.uuid,"/feature_settings"),{queryKey:[o.RR,null==l?void 0:l.uuid],enabled:!!(null==l?void 0:l.uuid)&&n});if(a)return d?!(null==(t=d.disabled_features)?void 0:t.includes("wiggle")):s;let c=!!d&&!(null==(e=d.disabled_features)?void 0:e.includes("wiggle"));return!n||c}function v(){var e,t;let{activeOrganization:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.enabled_wiggle_egress)&&t}function p(){var e,t;let{activeOrganization:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_allowed_hosts)?t:[]}function y(){var e,t;let{activeOrganization:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_hosts_template)?t:null}function m(){var e,t;let{account:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.enabled_wiggle_egress)&&t}function _(){var e,t;let{account:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_allowed_hosts)?t:[]}function S(){var e,t;let{account:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_hosts_template)?t:null}function h(){var e,t;let{account:n}=(0,r.YL)(),a=(0,u.fS)("default_wiggle_on"),i=(0,u.P0)("wiggle_pro_default_on","default_enabled",void 0,c.z.boolean().optional());if(null==n?void 0:n.settings)return null!=(t=null!=(e=n.settings.enabled_monkeys_in_a_barrel)?e:i)?t:a}function L(){let e=g(),t=f(),n=h();return!!e&&!!t&&n}function b(){let e=g(),t=f();return e&&t}function j(){var e;let t=(0,r.mV)(),{activeOrganization:n}=(0,r.YL)(),{data:a}=(0,i.Sk)("/api/organizations/".concat(null==n?void 0:n.uuid,"/feature_settings"),{queryKey:[o.RR,null==n?void 0:n.uuid],enabled:!!(null==n?void 0:n.uuid)&&t});return!t||!!a&&!(null==(e=a.disabled_features)?void 0:e.includes("skills"))}function k(){let e=L(),t=j(),n=(0,u.fS)("claudeai_skills");return!!e&&t&&n}function w(){let e=b(),t=(0,u.fS)("claudeai_skills");return e&&t}let Y=()=>{let e=(0,d.A)(),{account:t}=(0,r.YL)(),{addSuccess:n}=(0,l.Y)(),i=h(),o=f(),{mutate:u}=(0,a.yJ)(),c=(0,s.useRef)(null==t?void 0:t.settings);return(0,s.useEffect)(()=>{c.current=null==t?void 0:t.settings},[null==t?void 0:t.settings]),{isEnabled:i,toggleWiggle:(0,s.useCallback)(a=>{if(t&&o){if(a){var i,r;let t=null==(i=c.current)?void 0:i.enabled_artifacts_attachments,a=[];t&&a.push("Analysis Tool"),a.length>0&&n(e.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(r=c.current)?void 0:r.preview_feature_uses_artifacts)||n(e.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}u({enabled_monkeys_in_a_barrel:a,...a&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0}})}},[t,o,u,n,e])}}},45538:(e,t,n)=>{n.d(t,{BN:()=>T,CB:()=>h,GQ:()=>Q,Gz:()=>K,Kf:()=>b,LQ:()=>z,PL:()=>S,Zd:()=>A,bL:()=>Y,bs:()=>j,dx:()=>y,eW:()=>C,fo:()=>k,gM:()=>m,gr:()=>_,kj:()=>R,mu:()=>q,my:()=>E,nl:()=>x,sC:()=>p,sS:()=>P,tz:()=>O,u7:()=>L,xQ:()=>M});var a=n(19736),i=n(1613),r=n(64328),l=n(35984),o=n(21266),u=n(16178),s=n(80688),d=n(68067),c=n(4869),g=n(7620),f=n(10369),v=n(22624);let p=30,y=1e4;var m=function(e){return e.Student="student",e.Meeting="meeting",e.Haystack="haystack",e}({}),_=function(e){return e.Study="study",e.Career="career",e.Research="research",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let S=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,i.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[s.Wy,{orgUuid:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof u.LG&&"permission_error"===e.type}})},h=e=>{let{enabled:t=!0,limit:n,offset:a,starred:l,creatorFilter:u,projectFilter:d,orderBy:c,type:g}=e,{activeOrganization:p}=(0,r.YL)(),y=(0,v.K)(),m=null==p?void 0:p.uuid,_=(0,f.A)(),S=new URLSearchParams;return S.append("include_harmony_projects","true"),void 0!==n&&S.append("limit",n.toString()),void 0!==a&&S.append("offset",a.toString()),void 0!==l&&S.append("starred",l.toString()),void 0!==u&&S.append("creator_filter",u.toString()),void 0!==d&&S.append("filter",d.toString()),void 0!==c&&S.append("order_by",c.toString()),void 0!==g&&S.append("type",g.toString()),(0,i.Sk)("/api/organizations/".concat(m,"/projects?").concat(S.toString()),{queryKey:[s.BP,{orgUuid:m},{limit:n,offset:a,starred:l,creatorFilter:u,projectFilter:d,orderBy:c,type:g}],enabled:!!(t&&p&&y),select:e=>{let t=e.length===n;return Object.assign(e.filter(e=>!e.archived_at).map(e=>"haystack"===e.type?{...e,unformattedName:e.name,name:(0,o.secretMessage)({id:"haystack_as",intl:_,dangerouslyVisiblePublicValues:{name:e.name}})}:e),{hasMore:t})}})},L=e=>{let{enabled:t=!0,limit:n=p,offset:a=0,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,searchQuery:c}=e,{activeOrganization:g}=(0,r.YL)(),f=(0,v.K)(),y=null==g?void 0:g.uuid,m=new URLSearchParams;return m.append("limit",n.toString()),m.append("offset",a.toString()),void 0!==l&&m.append("starred",l.toString()),void 0!==o&&m.append("creator_filter",o.toString()),void 0!==u&&m.append("filter",u.toString()),void 0!==d&&m.append("order_by",d.toString()),void 0!==c&&m.append("searchQuery",c.toString()),(0,i.Sk)("/api/organizations/".concat(y,"/projects_v2?").concat(m.toString()),{queryKey:[s.Wf,{orgUuid:y},{limit:n,offset:a,starred:l,creatorFilter:o,projectFilter:u,orderBy:d,searchQuery:c}],enabled:!!(t&&g&&f)})},b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,i.mn)();return(0,g.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},j=()=>{let e=b(),t=(0,a.uE)();return(0,g.useCallback)(async()=>{let[n,i]=await Promise.all([e(),t({limit:a.dy})]);return((e,t)=>{let n=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),a=null==e?void 0:e.filter(e=>!n.find(t=>t.uuid===e.uuid));return[...n,...a]})(n,i)},[t,e])},k=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,f.A)();return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e),{queryKey:[s.hc,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof u.LG&&(404===e.statusCode||403===e.statusCode)},select:e=>"haystack"===e.type?{...e,unformattedName:e.name,name:(0,o.secretMessage)({id:"haystack_as",intl:a,dangerouslyVisiblePublicValues:{name:e.name}})}:e})},w=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)();return{addProject:e=>{n.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:[e,...t.data],pagination:{...t.pagination,total:t.pagination.total+1}}:t),n.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?[e,...t]:t),n.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:e.count+1}:e)},removeProject:e=>{n.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:t.data.filter(t=>t.uuid!==e),pagination:{...t.pagination,total:Math.max(0,t.pagination.total-1)}}:t),n.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?t.filter(t=>t.uuid!==e):t),n.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:Math.max(0,e.count-1)}:e)}}},Y=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=K(),{addProject:a}=w();return(0,i.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:e=>{a(e),n()}})},P=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=K();return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{a(e)},queryKey:[s.hc,{orgUuid:n,projectUuid:e}]})},C=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=K(),{removeProject:l}=w();return(0,i.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"DELETE",{onSuccess:()=>{l(e),a(e,{remove:!0})}})},z=function(e){let{limit:t=30,offset:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:a}=(0,r.YL)(),l=null==a?void 0:a.uuid,o=new URLSearchParams;return o.append("limit",t.toString()),o.append("offset",n.toString()),(0,i.Sk)("/api/organizations/".concat(l,"/projects/").concat(e,"/conversations_v2?").concat(o.toString()),{queryKey:[s.yF,{orgUuid:l,projectUuid:e,limit:t,offset:n}],enabled:!!a,staleTime:0,meta:{noToast:e=>e instanceof u.LG&&403===e.statusCode}})},T=()=>{var e,t;let n=h({enabled:!0,creatorFilter:"is_creator",limit:y}),a=null==(t=n.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...n,data:a}},K=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)();return(e,a)=>{let{remove:i=!1}=a||{};if([[s.BP,{orgUuid:t}],[s.Wf,{orgUuid:t}],[s.Wy,{orgUuid:t}]].forEach(e=>void n.invalidateQueries({queryKey:e})),e){let a=i?"removeQueries":"invalidateQueries";[[s.hc,{orgUuid:t,projectUuid:e}],[s.yF,{orgUuid:t,projectUuid:e}],[s.vE,{projectUuid:e}]].forEach(e=>void n[a]({queryKey:e}))}}},Q=(e,t)=>{let n=K();return(0,i.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{n(t)}})},M=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,d.fS)("claude_ai_sticky_project_settings");return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),{queryKey:[s.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},q=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,d.fS)("claude_ai_sticky_project_settings");return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),"PUT",(e,t)=>t?{...t,...e}:void 0,{queryKey:[s.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},E=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)();return(0,i.L2)(e=>"/api/organizations/".concat(t,"/projects/").concat(e.projectUuid,"/sync"),"POST",{meta:{noToast:!0},onSuccess:(e,a)=>{"done"===e.kb_resync_status&&a.projectUuid&&n.invalidateQueries({queryKey:[s.qz,{orgUuid:t,projectUuid:a.projectUuid}]})}})},R=()=>(0,d.fS)("claudeai_sync_project"),A=()=>{let{mutateAsync:e}=(0,a.x6)();return{moveToProject:(0,g.useCallback)(async function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{batchSize:i=20,batchDelayMs:r=500}=a;if(!t.length||!n)return Promise.resolve({totalMoved:0,totalFailed:0,conversationUuids:[],projectUuid:""});let l=t.length>1,o=0,u=0;if(l){let a=Math.ceil(t.length/i);for(let l=0;l<a;l++){let s=l*i,d=t.slice(s,s+i),c=await e({conversation_uuids:d,project_uuid:n});o+=c.moved.length,u+=c.failed.length,l<a-1&&await new Promise(e=>setTimeout(e,r))}}else{let a=await e({conversation_uuids:t,project_uuid:n});o=a.moved.length,u=a.failed.length}return{totalMoved:o,totalFailed:u,conversationUuids:t,projectUuid:n}},[e])}},x=()=>{let{mutateAsync:e}=(0,a.x6)(),{addSuccess:t,addError:n}=(0,l.Y)(),i=(0,f.A)(),o=(0,c.useQueryClient)(),{activeOrganization:u}=(0,r.YL)(),d=null==u?void 0:u.uuid,[v,p]=(0,g.useState)(new Set),y=(0,g.useCallback)(async function(a){let{showSuccess:r=!0,showError:l=!0,onSuccess:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.length)return Promise.resolve({moved:[],failed:[]});if(a.some(e=>v.has(e)))return Promise.resolve({moved:[],failed:a});p(e=>{let t=new Set(e);return a.forEach(e=>t.add(e)),t}),a.forEach(e=>{let t=[s.fC,{orgUuid:d},{uuid:e}];o.getQueryData(t)&&o.setQueryData(t,e=>e?{...e,project_uuid:void 0}:e)});try{let n=await e({conversation_uuids:a,project_uuid:null});return n.moved.length>0&&r&&t(i.formatMessage({defaultMessage:"Chat removed from project",id:"UkGfrdMZdS"})),null==u||u(n),await Promise.all(a.map(e=>o.invalidateQueries({queryKey:[s.fC,{orgUuid:d},{uuid:e}]}))),n}catch(e){throw await Promise.all(a.map(e=>o.invalidateQueries({queryKey:[s.fC,{orgUuid:d},{uuid:e}]}))),l&&n(i.formatMessage({defaultMessage:"Failed to remove chat from project",id:"4suoYkIuEm"}),{error:e,messageForLogging:"Failed to remove chat from project"}),e}finally{p(e=>{let t=new Set(e);return a.forEach(e=>t.delete(e)),t})}},[e,t,n,i,v,o,d]),m=(0,g.useCallback)(e=>v.has(e),[v]);return{removeFromProject:y,isRemoving:v.size>0,isRemovingConversation:m}},O=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/permissions"),{queryKey:[s._P,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e)})}},94028:(e,t,n)=>{n.d(t,{Bg:()=>s,fR:()=>g,iV:()=>c,ih:()=>d,nI:()=>f});var a=n(1613),i=n(64328),r=n(35984),l=n(80688),o=n(2e3),u=n(4869);let s=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=null==e?void 0:e.uuid,r=null==t?void 0:t.uuid,s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(r,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[l.hx,{orgUuid:r,accountUuid:n,syncSourceType:o.v8.GDRIVE}]})},300)}})},d=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,{addError:n}=(0,r.Y)(),s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{s.invalidateQueries({queryKey:[l.hx,{orgUuid:t,syncSourceType:o.v8.GDRIVE}]})},onError:e=>{n(e.message,{error:e,errorContext:{tags:{source:"knowledge_cleanup_ingestion"}}})}})},c=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,r=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:t=>{"done"===t.status&&r.invalidateQueries({queryKey:[l.qz,{orgUuid:n,projectUuid:e}]})}})},g=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(r,"/projects/").concat(e,"/kb/stats"),{queryKey:[l.qz,{orgUuid:r,projectUuid:e}],enabled:!!e&&t})},f=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/conversation/backfill"),"POST",{})}}}]);